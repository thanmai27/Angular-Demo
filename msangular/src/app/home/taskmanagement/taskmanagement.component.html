
<button id="show_content"  mat-raised-button color="accent" style="margin-left:20%;margin-top: 2%;" (click)="Fn_AddTask()">Add Task </button>
<div class="container-fluid" style="margin-top: 2%;">
    <div class="row">
        <div class="col-12">
            <div class="card" id="table-content">

                <!-- /.card-header -->
                <div class="card-body">
                    <table id="example2" class="table table-bordered table-striped" datatable >
                        <thead>
                            <tr>
                                <th>Project Name</th>
                                <th>Team Member</th>
                                <th>Task Status</th>
                                <th>Created On</th>
                                <th>Assign On</th>
                                <th>Start On</th>
                                <th>End On</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let task of taskService.tasks;let indexOfelement=index;">
                                <td>{{task.projectName}}</td>
                                <td>{{task.teamMember}}</td>
                                <td>{{task.taskStatus}}</td>
                                <td>{{task.createdOn|date:'medium'}}</td>
                                <td>{{task.assignOn==null?'NA':task.assignOn|date:'medium'}}</td>
                                <td>{{task.startOn==null?'NA':task.startOn|date:'medium'}}</td>
                                <td>{{task.endOn==null?'NA':task.endOn|date:'medium'}}</td>
                                <td>

                                    <button [disabled]="task.taskStatus=='Completed'||task.taskStatus=='Cancelled'||task.taskStatus=='ON hold'?true:false" class="btn btn-primary" style="background-color: rgb(211, 21, 211);width: 80px;border: transparent;margin-left: 3px;" (click)="fn_Edit(task)"> Edit</button>

                                    <button class="btn btn-success" style="width: 80px;border: transparent;margin-left: 3px" (click)="fn_View(task)"> View</button>

                                    <!-- <button class="mat-icon-button" style="background-color: rebeccapurple;" mat-icon-button [disabled]="task.taskStatus=='Completed'||task.taskStatus=='Cancelled'||task.taskStatus=='ON hold'?true:false" (click)="fn_Edit(task)"><mat-icon >create</mat-icon></button>&nbsp;
                                    <button class="mat-icon-button" style="background-color:green" mat-icon-button (click)="fn_View(task)"><mat-icon >preview</mat-icon></button> -->

                                </td>

                            </tr>
                        </tbody>

                    </table>
                </div>
                <!-- /.card-body -->
            </div>
            <!-- /.card -->


        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</div>

<div id="target">
    <form  #myform="ngForm" ngNativeValidate>

        <div *ngIf="show">
    
            <input type="hidden" name="_id" #_id="ngModel" [(ngModel)]="taskmodel._id">
    
            <div id="hide_content" class="card">
    
                <div class="card-body">
    
                    <div class="row">
                        <div class="col-md-2">
                            <label>Project</label>
                        </div>
                        <div class="col-md-4">
                            <mat-form-field appearance="fill">
                                <mat-label>select Project</mat-label>
                                <mat-select name="projectName" [(ngModel)]="taskmodel.projectName" required>
                                    <mat-option *ngFor="let project of projectService.projects" [value]="project.projectName  " (click)="fn_Select(project._id)">
                                        {{project.projectName }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="projectControl.hasError('required')">Please choose a project</mat-error>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <label>Team Memeber</label>
                        </div>
                        <div class="col-md-4">
                            <mat-form-field appearance="fill">
                                <mat-label>select TeamMember</mat-label>
    
                                <mat-select name="teamMember" [(ngModel)]="taskmodel.teamMember" required>
                                    <mat-option *ngFor="let project of teamMember" [value]="project">
                                        {{project}}
                                    </mat-option>
    
                                </mat-select>
                                <mat-error *ngIf="projectControl.hasError('required')">Please choose a TeamMember</mat-error>
    
                            </mat-form-field>
                        </div>
                    </div>
    
    
                    <div class="row">
                        <div class="col-md-2">
                            <label>Status</label>
                        </div>
                        <div class="col-md-4">
                            <!-- <mat-form-field appearance="fill" >
                                <mat-label>select Status</mat-label>
                                <mat-select [(value)]="selected" (change)="fn_Change2($event)">
                                  <mat-option id="queue" value="Queue"  (click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)" >Queue</mat-option>
                                  <mat-option id="assign" [disabled]="optionDisabled" value="Assign"(click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)">Assign</mat-option>
                                  <mat-option id="started"  value="Started" >Started</mat-option>
                                  <mat-option id="completed" value="Completed"(click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)">Completed</mat-option>
                                  <mat-option id="hold" value="ON hold"(click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)">ON hold</mat-option>
                                  <mat-option id="cancelled" value="Cancelled"(click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)">Cancelled</mat-option>

                                </mat-select>
                              </mat-form-field> -->
                              
                          
                            <!-- <mat-form-field appearance="fill">
                                <mat-label>select Status</mat-label>
                                <mat-select name="taskStatus" (change)="fn_Change2($event)" required>
    
                                    <mat-option id={{status}} *ngFor="let status of options" [value]="status" (click)="fn_Change(taskmodel._id,taskmodel.assignDate,taskmodel.taskStatus)" >
                                        {{status }}
                                    </mat-option>
                                </mat-select>
                                <mat-error *ngIf="statusControl.hasError('required')">Please choose a status</mat-error>
                            </mat-form-field> -->

                            <mat-form-field appearance="fill">
                                <mat-label>select Status</mat-label>
                                <mat-select [disabled]="disableSelect.value" [(value)]="selected"(selectionChange)="fn_Change2($event.value)" >
                                  <mat-option></mat-option>
                                  <mat-option [value]="option" *ngFor="let option of options">{{ option }}</mat-option>
                                </mat-select>
                              </mat-form-field>
    
                        </div>
                        <div class="col-md-2" *ngIf="this.isAssign" >
                            <label>Assign Date</label>
                        </div>
                        <div class="col-md-4" *ngIf="this.isAssign" >
                            <mat-form-field color="accent" appearance="fill" >
                                <mat-label>select assign date</mat-label>
    
                                <input id="assignOn" type="datetime-local" step=".1" matInput  name="assignOn"  [disabled]="isReadOnly" [ngModel]="taskmodel.assignOn|date:'yyyy-MM-ddTHH:mm:ss'"(ngModelChange)="taskmodel.assignOn= $event" [required]="selected == 'Assign'" >
                                
                            </mat-form-field>

                        </div>
                    </div>
    
                    <div class="row"  >
                        <div class="col-md-2" *ngIf="this.isStart">
                            <label>Start Date</label>
                        </div>
                        <div class="col-md-4" *ngIf="this.isStart">
                            <mat-form-field color="accent" appearance="fill">
                                <mat-label>select Start date</mat-label>
    
                                <input matInput  type="datetime-local" step=".1" id="startOn"#startOn="ngModel" name="startOn"   [ngModel]="taskmodel.startOn|date:'yyyy-MM-ddTHH:mm:ss'"(ngModelChange)="taskmodel.startOn= $event" [required]="selected == 'Started'">
                               
                            </mat-form-field>
                            <mat-error *ngIf="startOn.hasError('required')">Please choose a start date</mat-error>
    
                        </div>
                        <div class="col-md-2" *ngIf="this.isEnd">
                            <label>End Date</label>
                        </div>
                        <div class="col-md-4" *ngIf="this.isEnd">
                            <mat-form-field color="accent" appearance="fill">
                                <mat-label>select end date</mat-label>
    
                                <input  matInput type="datetime-local"  step=".1" id="endOn" name="endOn" #endOn="ngModel" [ngModel]="taskmodel.endOn|date:'yyyy-MM-ddTHH:mm:ss'"(ngModelChange)="taskmodel.endOn= $event" [required]="selected == 'Completed'||'Cancelled'||'ON hold'">
                                
                            </mat-form-field>
                            <mat-error *ngIf="endOn.hasError('required')">Please choose a end date</mat-error>
    
                        </div>
                    </div>
                </div>
    
               
                <div style="margin-top: 2%;" class="col-md-12  text-right">
                    <button id="btn_save" class="btn btn-success" [disabled]="!myform.valid" (click)="fn_Save(myform)">Save</button> &nbsp;
                    <button class="btn btn-danger" (click)="fn_Cancel(myform)">Cancel</button>
    
                </div>
    
            </div>
    
    
    
        </div>
    
    
    
    
    </form>
</div>




